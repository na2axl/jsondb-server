module.exports = {

    _post: {},
    _get: {},
    setPOST: function (data) {
        this._post = data;
    },
    setGET: function (data) {
        this._get = data;
    },
    result: function (data) {
        var api           = null;
        var json          = null;
        var api_class     = this._post['c'] || null;
        var api_method    = this._post['m'] || null;
        var api_arguments = this._post['a'] || [];

        if (api_class !== null) {
            api = require(api_class);
        }

        if (api !== null) {
            try {
                json = {'err': false, 'err_msg': null, 'err_stack': null, 'res': api[api_method].apply(api, api_arguments)};
            }
            catch (e) {
                json = {'err': true, 'err_msg': e.message, 'err_stack': e.stack, 'res': null};
            }
        }
        else {
            json = {'err': true, 'err_msg': "An unexpected error occurred while calling the API. Maybe the API \"" + api_class + "\" doesn't exists.", 'err_stack': '', 'res': ''};
        }

        return json;
    }

};
